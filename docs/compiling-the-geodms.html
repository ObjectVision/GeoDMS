<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>compiling-the-geodms | GeoDMS wiki</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="compiling-the-geodms" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A starter template for a Jeykll site using the Just the Docs theme!" /> <meta property="og:description" content="A starter template for a Jeykll site using the Just the Docs theme!" /> <link rel="canonical" href="http://localhost:4000/docs/compiling-the-geodms.html" /> <meta property="og:url" content="http://localhost:4000/docs/compiling-the-geodms.html" /> <meta property="og:site_name" content="GeoDMS wiki" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="compiling-the-geodms" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A starter template for a Jeykll site using the Just the Docs theme!","headline":"compiling-the-geodms","url":"http://localhost:4000/docs/compiling-the-geodms.html"}</script> <!-- End Jekyll SEO tag --> <!-- Automatically display code inside script tags with type=math/tex using MathJax --> <script type="text/javascript" defer src="../assets/js/mathjax-script-type.js"> </script> <!-- Copied from https://docs.mathjax.org/en/latest/web/components/combined.html --> <script type="text/javascript" id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"> </script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> GeoDMS wiki </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in software category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/software.html" class="nav-list-link">software</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/system-requirements.html" class="nav-list-link">system-requirements</a></li><li class="nav-list-item"><a href="/docs/installation-instructions.html" class="nav-list-link">installation-instructions</a></li><li class="nav-list-item"><a href="/docs/folders-and-placeholders.html" class="nav-list-link">folders-and-placeholders</a></li><li class="nav-list-item"><a href="/docs/configuration-file-editor.html" class="nav-list-link">configuration-file-editor</a></li><li class="nav-list-item"><a href="/docs/known-issues.html" class="nav-list-link">known-issues</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in user-guide category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/user-guide.html" class="nav-list-link">user-guide</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/user-guide-geodms-gui.html" class="nav-list-link">user-guide-geodms-gui</a></li><li class="nav-list-item"><a href="/docs/user-guide-geodms-gui-older-variants-(delphi).html" class="nav-list-link">user-guide-geodms-gui-older-variants-(delphi)</a></li><li class="nav-list-item"><a href="/docs/user-guide-geodms-run.html" class="nav-list-link">user-guide-geodms-run</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in how-to-model category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/how-to-model.html" class="nav-list-link">how-to-model</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/configuration-basics.html" class="nav-list-link">configuration-basics</a></li><li class="nav-list-item"><a href="/docs/unit.html" class="nav-list-link">unit</a></li><li class="nav-list-item"><a href="/docs/data-source.html" class="nav-list-link">data-source</a></li><li class="nav-list-item"><a href="/docs/expression.html" class="nav-list-link">expression</a></li><li class="nav-list-item"><a href="/docs/template.html" class="nav-list-link">template</a></li><li class="nav-list-item"><a href="/docs/visualisation-style.html" class="nav-list-link">visualisation-style</a></li><li class="nav-list-item"><a href="/docs/property.html" class="nav-list-link">property</a></li></ul></li><li class="nav-list-item"><a href="/docs/value-type.html" class="nav-list-link">value-type</a></li><li class="nav-list-item"><a href="/docs/configuration-examples.html" class="nav-list-link">configuration-examples</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in operator category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/operator.html" class="nav-list-link">operator</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/arithmetic-functions.html" class="nav-list-link">arithmetic-functions</a></li><li class="nav-list-item"><a href="/docs/ordering-functions.html" class="nav-list-link">ordering-functions</a></li><li class="nav-list-item"><a href="/docs/aggregation-functions.html" class="nav-list-link">aggregation-functions</a></li><li class="nav-list-item"><a href="/docs/conversion-functions.html" class="nav-list-link">conversion-functions</a></li><li class="nav-list-item"><a href="/docs/classify-functions.html" class="nav-list-link">classify-functions</a></li><li class="nav-list-item"><a href="/docs/transcendental-functions.html" class="nav-list-link">transcendental-functions</a></li><li class="nav-list-item"><a href="/docs/predicates-functions.html" class="nav-list-link">predicates-functions</a></li><li class="nav-list-item"><a href="/docs/logical-functions.html" class="nav-list-link">logical-functions</a></li><li class="nav-list-item"><a href="/docs/relational-functions.html" class="nav-list-link">relational-functions</a></li><li class="nav-list-item"><a href="/docs/selection-functions.html" class="nav-list-link">selection-functions</a></li><li class="nav-list-item"><a href="/docs/rescale-functions.html" class="nav-list-link">rescale-functions</a></li><li class="nav-list-item"><a href="/docs/constant-functions.html" class="nav-list-link">constant-functions</a></li><li class="nav-list-item"><a href="/docs/trigonometric-functions.html" class="nav-list-link">trigonometric-functions</a></li><li class="nav-list-item"><a href="/docs/geometric-functions.html" class="nav-list-link">geometric-functions</a></li><li class="nav-list-item"><a href="/docs/network-functions.html" class="nav-list-link">network-functions</a></li><li class="nav-list-item"><a href="/docs/grid-functions.html" class="nav-list-link">grid-functions</a></li><li class="nav-list-item"><a href="/docs/string-functions.html" class="nav-list-link">string-functions</a></li><li class="nav-list-item"><a href="/docs/file,-folder-and-read-functions.html" class="nav-list-link">file,-folder-and-read-functions</a></li><li class="nav-list-item"><a href="/docs/unit-functions.html" class="nav-list-link">unit-functions</a></li><li class="nav-list-item"><a href="/docs/matrix-functions.html" class="nav-list-link">matrix-functions</a></li><li class="nav-list-item"><a href="/docs/sequence-functions.html" class="nav-list-link">sequence-functions</a></li><li class="nav-list-item"><a href="/docs/metascript-functions.html" class="nav-list-link">metascript-functions</a></li><li class="nav-list-item"><a href="/docs/allocation-functions.html" class="nav-list-link">allocation-functions</a></li><li class="nav-list-item"><a href="/docs/miscellaneous-functions.html" class="nav-list-link">miscellaneous-functions</a></li></ul></li></ul> </nav> <footer class="site-footer"> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search GeoDMS wiki" aria-label="Search GeoDMS wiki" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/ObjectVision/GeoDMS" class="site-button" > GeoDms on Github </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <p>This page describes how to compile GeoDmsRun.exe from source on Windows. The process is bound to change through an ongoing effort to make the source code more accessible to the open source community. Compilation is performed using Microsoft Visual Studio (2022) which can be downloaded <a href="https://visualstudio.microsoft.com/vs/community/">here</a>. Make sure to also install the latest versions of additional components: C++ MFC and C++ ATL. This document is written as a chronological guide.</p> <h2 id="clone-geodms-from-github"> <a href="#clone-geodms-from-github" class="anchor-heading" aria-labelledby="clone-geodms-from-github"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Clone GeoDMS from Github </h2> <p>Clone GeoDMS from the <a href="https://github.com/ObjectVision/GeoDMS">Github repository</a>.</p> <h2 id="setting-up-external-dependencies"> <a href="#setting-up-external-dependencies" class="anchor-heading" aria-labelledby="setting-up-external-dependencies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> setting up external dependencies </h2> <h6 id="vcpkg-openssl-gdal-and-boost"> <a href="#vcpkg-openssl-gdal-and-boost" class="anchor-heading" aria-labelledby="vcpkg-openssl-gdal-and-boost"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>vcpkg: openssl, gdal and boost</strong> </h6> <p>Dependencies are easily installed using the <a href="https://vcpkg.io/en/index.html">open-source package manager vcpkg</a>. Open a Developer Command Prompt, cd to the desired location for vcpkg and use the following commands to install and integrate vcpkg into Microsoft Visual Studio (2022):</p><pre>
git clone https://github.com/Microsoft/vcpkg
cd vcpkg
bootstrap-vcpkg.bat
vcpkg integrate install
</pre><p>The last command is optional, but recommended for user-wide integration. TODO: add vcpkg paths</p> <p>Now vcpkg is installed the following three commands will install necessary GeoDMS dependencies: openssl (https requests for wms background layers), gdal and boost.</p> <p>In case multiple Microsoft Visual Studio versions are installed, you can open a Developer Command Prompt from the Microsoft Visual Studio (2022) menu in Tools &gt; Command line &gt; Developer Command Prompt to ensure vcpkg is hooked to the right environment, and, assuming you build for x64:</p><pre>
set VCPKG_DEFAULT_TRIPLET=x64-windows
</pre><pre>
vcpkg install boost boost-locale openssl-windows sqlite3[rtree] gdal ms-gsl --triplet x64-windows
</pre><p>The vcpkg triplet you use may vary depending on the platform specifics.</p> <p>Make sure to restart Microsoft Visual Studio (2022) for changes to take effect. To update further down the line use git pull from within the vcpkg folder and ./vcpkg update or ./vcpkg upgrade.</p> <p>Known issues:</p> <ul> <li>Error: Building package atlmfc:x64-windows failed with: BUILD_FAILED -&gt; Solution: <a href="https://github.com/microsoft/vcpkg/issues/4257">https://github.com/microsoft/vcpkg/issues/4257</a></li> </ul> <h4 id="intel-ipp"> <a href="#intel-ipp" class="anchor-heading" aria-labelledby="intel-ipp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Intel IPP </h4> <p>Download the Intel® oneAPI Base Toolkit <a href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/base-toolkit-download.html">here</a>. From setup select the latest Integrated Performance Primitives (IPP) library. Open the Microsoft Visual Studio (2022) project file located in /geo/dll/GeoDLL.vcxproj and set the IPP paths on lines 49, 55 and 59.</p> <h4 id="geodmsgui"> <a href="#geodmsgui" class="anchor-heading" aria-labelledby="geodmsgui"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GeoDMSGui </h4> <p>Install Qt version 6.5.1 or later.</p> <h2 id="building-the-geodms-dlls"> <a href="#building-the-geodms-dlls" class="anchor-heading" aria-labelledby="building-the-geodms-dlls"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> building the GeoDMS DLLs </h2> <p>Open the solution file “geodms/trunk/all22.sln” in Microsoft Visual Studio (2022). You see that GeoDMS consists of various projects from which we will create .dll files. There are four build configurations: a Release and Debug version in both x64 and Win32. Use ctrl-shift-b to build the whole solution, or alternatively follow these steps as roadmap to build GeoDmsRun.exe:</p> <ol> <li>Rtc (Runtime Core Library)</li> <li>Sym (configuration syntax parser and producer of an internal representation of a model and its calculation rules.)</li> <li>Tic (Tree Item Classes, Data Items and Units and related services.)</li> <li>Stx (configuration syntax parser and producer of an internal representation of a model and its calculation rules.)</li> <li>Stg (Storage Managers, providing a generic interface to GDAL, Proj, and native Storage Implementations including .shp and .dbf the TIFF lib, and ODBC connections.)</li> <li>Clc (implementation of common operators)</li> <li>Geo (implementation of geometric and network operators, such as Dijkstra functions, raster convolution, polygon and arc operations)</li> <li>Shv (Viewer Components (TableViewer, MapViewer) and related Carets, and Graphic Components.)</li> <li>And finally: GeoDmsRun.exe, and GeoDmsGuiQt.exe</li> </ol> <p>All build products will be placed in the bin folder depending on the chosen build configuration, for instance the “GeoDmsRun.exe” file may reside in the: geodms/bin/Release/x64 folder.</p> <h2 id="python-bindings-work-in-progress"> <a href="#python-bindings-work-in-progress" class="anchor-heading" aria-labelledby="python-bindings-work-in-progress"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python bindings (work in progress) </h2> <p>Python bindings are being developed in the main development git branch (currently: v14). The GeoDmsPython project produces the required Python3 bindings using pybin11. First make sure python 3.10 or above is installed on your system, which can be downloaded <a href="https://www.python.org/downloads/">here</a>. Next make sure pybind11 is installed, using command:</p><pre>
vcpkg install python3 --triplet x64-windows
vcpkg install pybind11 --triplet x64-windows
</pre><p>Then in the GeoDmsPython project properties make sure that the include path refers correctly to your vcpkg python locations</p> <ul> <li>C/C++ -&gt; Additional Include Directories: <img src="https://github.com/ObjectVision/GeoDMS/assets/2284361/43b39724-032c-47cd-af08-3dcd142d85f5" alt="image" /></li> </ul> <p>If all is setup, GeoDmsPython project can be build without errors, the output will be named geodms.pyd in the output folder (python dynamic module).</p> <p>Now open a terminal in the build folder where geodms.pyd is located and type “python” which will start up python in command line mode. To test the geodms module import the version function:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">geodms</span> <span class="kn">import</span> <span class="n">version</span>
</code></pre></div></div> <p>And evaluate:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">version</span><span class="p">()</span>
</code></pre></div></div> <p>Which should return a proper version string, which depends on the build time and type: <img src="https://github.com/ObjectVision/GeoDMS/assets/96182097/549fd537-293a-42de-8152-c5f3d6f81067" alt="image" /></p> <p>Additionally, you can run LoadConfigFromPython.py, located in the LoadConfigFromPython project folder.</p> <h2 id="native-linux-compilation-work-in-progress"> <a href="#native-linux-compilation-work-in-progress" class="anchor-heading" aria-labelledby="native-linux-compilation-work-in-progress"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Native Linux compilation (work in progress) </h2> <p>Native Linux compilation is being prepared in the linux_gcc branch.</p> <p>Steps that i did to get somewhere are:</p> <ul> <li>Install WSL (Ubuntu) and set ssh on port 23 <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt update
sudo apt upgrade
sudo apt install net-tools
cd /etc/ssh/sshd_config
vi sshd_config ;
sudo service ssh restart
</code></pre></div> </div> </li> <li>install gcc and vcpkg</li> </ul> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install g++ gdb make ninja-build rsync zip
sudo apt install vcpkg
cd /mnt/c/vcpkg/scripts/buildsystems
./bootstrap-vcpkg.sh
vcpkg install boost --triplet x64-linux
vcpkg integrate install
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
