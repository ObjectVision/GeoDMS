<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>unit-metric-consistency | GeoDMS wiki</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="unit-metric-consistency" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A starter template for a Jeykll site using the Just the Docs theme!" /> <meta property="og:description" content="A starter template for a Jeykll site using the Just the Docs theme!" /> <link rel="canonical" href="http://localhost:4000/docs/unit-metric-consistency.html" /> <meta property="og:url" content="http://localhost:4000/docs/unit-metric-consistency.html" /> <meta property="og:site_name" content="GeoDMS wiki" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="unit-metric-consistency" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A starter template for a Jeykll site using the Just the Docs theme!","headline":"unit-metric-consistency","url":"http://localhost:4000/docs/unit-metric-consistency.html"}</script> <!-- End Jekyll SEO tag --> <!-- Automatically display code inside script tags with type=math/tex using MathJax --> <script type="text/javascript" defer src="../assets/js/mathjax-script-type.js"> </script> <!-- Copied from https://docs.mathjax.org/en/latest/web/components/combined.html --> <script type="text/javascript" id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"> </script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> GeoDMS wiki </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in software category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/software.html" class="nav-list-link">software</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/system-requirements.html" class="nav-list-link">system-requirements</a></li><li class="nav-list-item"><a href="/docs/installation-instructions.html" class="nav-list-link">installation-instructions</a></li><li class="nav-list-item"><a href="/docs/folders-and-placeholders.html" class="nav-list-link">folders-and-placeholders</a></li><li class="nav-list-item"><a href="/docs/configuration-file-editor.html" class="nav-list-link">configuration-file-editor</a></li><li class="nav-list-item"><a href="/docs/known-issues.html" class="nav-list-link">known-issues</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in user-guide category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/user-guide.html" class="nav-list-link">user-guide</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/user-guide-geodms-gui.html" class="nav-list-link">user-guide-geodms-gui</a></li><li class="nav-list-item"><a href="/docs/user-guide-geodms-gui-older-variants-(delphi).html" class="nav-list-link">user-guide-geodms-gui-older-variants-(delphi)</a></li><li class="nav-list-item"><a href="/docs/user-guide-geodms-run.html" class="nav-list-link">user-guide-geodms-run</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in how-to-model category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/how-to-model.html" class="nav-list-link">how-to-model</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/configuration-basics.html" class="nav-list-link">configuration-basics</a></li><li class="nav-list-item"><a href="/docs/unit.html" class="nav-list-link">unit</a></li><li class="nav-list-item"><a href="/docs/data-source.html" class="nav-list-link">data-source</a></li><li class="nav-list-item"><a href="/docs/expression.html" class="nav-list-link">expression</a></li><li class="nav-list-item"><a href="/docs/template.html" class="nav-list-link">template</a></li><li class="nav-list-item"><a href="/docs/visualisation-style.html" class="nav-list-link">visualisation-style</a></li><li class="nav-list-item"><a href="/docs/property.html" class="nav-list-link">property</a></li></ul></li><li class="nav-list-item"><a href="/docs/value-type.html" class="nav-list-link">value-type</a></li><li class="nav-list-item"><a href="/docs/configuration-examples.html" class="nav-list-link">configuration-examples</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in operator category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/operator.html" class="nav-list-link">operator</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/arithmetic-functions.html" class="nav-list-link">arithmetic-functions</a></li><li class="nav-list-item"><a href="/docs/ordering-functions.html" class="nav-list-link">ordering-functions</a></li><li class="nav-list-item"><a href="/docs/aggregation-functions.html" class="nav-list-link">aggregation-functions</a></li><li class="nav-list-item"><a href="/docs/conversion-functions.html" class="nav-list-link">conversion-functions</a></li><li class="nav-list-item"><a href="/docs/classify-functions.html" class="nav-list-link">classify-functions</a></li><li class="nav-list-item"><a href="/docs/transcendental-functions.html" class="nav-list-link">transcendental-functions</a></li><li class="nav-list-item"><a href="/docs/predicates-functions.html" class="nav-list-link">predicates-functions</a></li><li class="nav-list-item"><a href="/docs/logical-functions.html" class="nav-list-link">logical-functions</a></li><li class="nav-list-item"><a href="/docs/relational-functions.html" class="nav-list-link">relational-functions</a></li><li class="nav-list-item"><a href="/docs/selection-functions.html" class="nav-list-link">selection-functions</a></li><li class="nav-list-item"><a href="/docs/rescale-functions.html" class="nav-list-link">rescale-functions</a></li><li class="nav-list-item"><a href="/docs/constant-functions.html" class="nav-list-link">constant-functions</a></li><li class="nav-list-item"><a href="/docs/trigonometric-functions.html" class="nav-list-link">trigonometric-functions</a></li><li class="nav-list-item"><a href="/docs/geometric-functions.html" class="nav-list-link">geometric-functions</a></li><li class="nav-list-item"><a href="/docs/network-functions.html" class="nav-list-link">network-functions</a></li><li class="nav-list-item"><a href="/docs/grid-functions.html" class="nav-list-link">grid-functions</a></li><li class="nav-list-item"><a href="/docs/string-functions.html" class="nav-list-link">string-functions</a></li><li class="nav-list-item"><a href="/docs/file,-folder-and-read-functions.html" class="nav-list-link">file,-folder-and-read-functions</a></li><li class="nav-list-item"><a href="/docs/unit-functions.html" class="nav-list-link">unit-functions</a></li><li class="nav-list-item"><a href="/docs/matrix-functions.html" class="nav-list-link">matrix-functions</a></li><li class="nav-list-item"><a href="/docs/sequence-functions.html" class="nav-list-link">sequence-functions</a></li><li class="nav-list-item"><a href="/docs/metascript-functions.html" class="nav-list-link">metascript-functions</a></li><li class="nav-list-item"><a href="/docs/allocation-functions.html" class="nav-list-link">allocation-functions</a></li><li class="nav-list-item"><a href="/docs/miscellaneous-functions.html" class="nav-list-link">miscellaneous-functions</a></li></ul></li></ul> </nav> <footer class="site-footer"> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search GeoDMS wiki" aria-label="Search GeoDMS wiki" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/ObjectVision/GeoDMS" class="site-button" > GeoDms on Github </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h2 id="unit_metric-consistency-in-calculations"> <a href="#unit_metric-consistency-in-calculations" class="anchor-heading" aria-labelledby="unit_metric-consistency-in-calculations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Unit_metric consistency in calculations </h2> <p>The GeoDMS controls the model logic by checking the <a href="metric">metric</a>, <a href="domain-unit">domain-unit</a> and <a href="values-unit">values-unit</a> of each calculation step.</p> <p>Three types of consistency checks are illustrated by the next example:</p><pre>
container UnitConsistencies
{
   container Units
   {
      unit&lt;uint32&gt;  NrInhabitants      := BaseUnit('NrInhabitants', 'uint32');
      unit&lt;uint32&gt;  NrCows             := BaseUnit('NrCows', 'uint32');
      unit&lt;float32&gt; NrHa               := BaseUnit('NrHa', 'float32');
      unit&lt;float32&gt; NrInhabitantsPerHa := NrInhabitants / NrHa;
   }
   container RegionalInformation
   :  Using       = "Units",
   ,  StorageName = "%projDir%/data/regionalinfo.mdb"
   {
      unit&lt;uint32&gt; Country: SqlString = "SELECT * FROM Country ORDER BY CountryID"
      {
         attribute&lt;NrInhabitants&gt; Inhabitants;
         attribute&lt;NrCows&gt;        Cows;
         attribute&lt;NrHa&gt;          Area;
      }
      unit&lt;uint32&gt; EU15:  SqlString = "SELECT * FROM EU15 ORDER BY EU15ID"
      {
         attribute&lt;NrInhabitants&gt; Inhabitants;
         attribute&lt;NrHa&gt;          Area;
      }
      container Calculations: Using = "RegionalInformation"`
      {
         attribute&lt;uint32&gt;             SumInhabitantsAndCows  (Country) := Country/Inhabitants + Country/Cows;
         attribute&lt;NrInhabitants&gt;      SumInhabitants         (Country) := Country/Inhabitants + EU15/Inhabitants;
         attribute&lt;NrInhabitantsPerHa&gt; NrInhabitantsPerHa     (Country) := Country/Inhabitants / Country/Area;
      }
   }
}
</pre><h2 id="metric-consistency"> <a href="#metric-consistency" class="anchor-heading" aria-labelledby="metric-consistency"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> metric consistency </h2> <p>The <a href="metric">metric</a> indicates how the values of a data item need to be interpreted. A parameter e.g. does not only have a value 300, but a value of 300 meter (in which meter is the metric for this item).</p> <p>The GeoDMS is aware for each <a href="operators-and-functions">operators-and-functions</a> if and how <a href="data-item">data-item</a> with a different metric can be combined. The parameter in meters can for instance not be summed with a parameter in seconds, but it can be divided by a parameter with as metric: seconds.</p> <p>The functionality to check the metric in calculations is an important quality control aspect of the GeoDMS and already has traced multiple errors in incorrect factor and metric combinations. To facilitate this quality control, for each data item a metric needs to be configured. This metric is part of the configuration of the <a href="values-unit">values-unit</a>.</p> <h3 id="error"> <a href="#error" class="anchor-heading" aria-labelledby="error"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> error </h3> <p>In the example above, the first <a href="attribute">attribute</a> in the Calculations container, <em>SumInhabitantsAndCows</em> raises the following error if the data item is requested.</p> <p><img src="../assets/img/GUI/unit_err1.jpg" alt="" /></p> <p>The error generated is: “<em>Operator add Error: Arguments must have compatible units, but arg1 has Metric NrInhabitants and arg2 has Metric NrCows</em>”.</p> <div class="table-wrapper"><table> <tbody> <tr> <td>This error is generated because the metric of both <a href="unit">unit</a> does not match (which is requested for the [+</td> <td>add]] operator). It is not logical to add data items with a different metric. For each operator &amp; function is defined if the data items need to match with regard to their metric, see the description of each operator &amp; function. In case an <a href="expression">expression</a> is configured, conflicting with these rules, an error is generated. If it is still desired to add the number of cows with the number of people, they both should be configured in a values unit with the same metric (e.g. NrLivingCreatures).</td> </tr> </tbody> </table></div> <h2 id="domain-unit-consistency"> <a href="#domain-unit-consistency" class="anchor-heading" aria-labelledby="domain-unit-consistency"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> domain unit consistency </h2> <p>Tthe GeoDMS checks the consistency of the domain unit in calculations. Most operators and functions can only combine data items of the same domain unit , except e.g. the relational functions</p> <h3 id="error-1"> <a href="#error-1" class="anchor-heading" aria-labelledby="error-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> error </h3> <p>The second attribute in the Calculations container, SumInhabitants, tries to add the attribute inhabitants per country with the attribute inhabitants for EU15. This is not a logical operation as only data items of the same domain unit can be logically summed. The following error is generated:</p> <p><img src="../assets/img/GUI/unit_err2.jpg" alt="" /></p> <p>The error generated is: “<em>Domain unification of /RegionalInformation/Country (: UInt32) with /RegionalInformation/EU15 (: UInt32) is not possible because of Domain incompatibiliy due to missing or different calculation rule</em>”</p> <p>This error indicates an inconsistency as the two domain units (Country and EU15 in this example) differ, which is not allowed for the + operator. For each operator &amp; function is defined if the data items need to match with regard to their domain units, see the description of each see the description of each operator &amp; function. In case an expression is configured, conflicting with these rules, an error is generated.</p> <p>Domain inconsistencies do not occur for data items combined with <a href="parameter">parameter</a>.</p> <h2 id="value-type-consistency"> <a href="#value-type-consistency" class="anchor-heading" aria-labelledby="value-type-consistency"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> value type consistency </h2> <p>Within the GeoDMS multiple value types are used. We advice to use a value type with the smallest size that fits to your data. This make calculations faster and less memory consuming.</p> <p>Combining data items with multiple value types is not trivial. Therefore in many cases data items need to be casted to other value types, before they can be combined in expressions.</p> <h3 id="error-2"> <a href="#error-2" class="anchor-heading" aria-labelledby="error-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> error </h3> <p>The third derived attribute in the Calculations container, NrInhabitantsPerHa, seems to have a logical expression. Still an error is generated:</p> <p><img src="../assets/img/GUI/unit_err3.jpg" alt="" /></p> <p>The error generated is: “<em>div Error: Cannot find operator for these arguments. Possible cause: argument type mismatch. Check the types of the used arguments</em>.”</p> <p>This error indicates the GeoDMS can not divide directly two data items with different value types (in this case uint32 and float32).</p> <p>For each operator &amp; function is defined which value types can be combined. The applies section of the documentation of each operator/function refers to the valid signatures, describing the allowed combinations. In case an expression is configured, conflicting with these rules, an error is generated. As the resulting data item in the example is configured with a float32 value type, the divide operator also requests float32 data_item.</p> <p>The number of inhabitants supplier in the expression need to be converted to a float32 value type. See the <a href="conversion-functions">conversion-functions</a> for an overview of all conversion functions.</p> <p>The following expression will solve the problem:</p><pre>
:= float32(Country/Inhabitants) / CountryInfo/Area;
</pre><p>With this expression the attribute NrInhabitantsPerHa can be calculated.</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
