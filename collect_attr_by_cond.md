*[[Relational functions]] collect_attr_by_cond*

## syntax

- collect_attr_by_cond(*tree_item*, *selection domain unit*, *condition*)

## definition

collect_attr_by_cond(*tree_item*, *selection domain unit*, *condition*) results in a **new [[container]] with all [[subitems|subitem]] from the *src_tree_item* argument** with the same domain unit as the *condition* argument.
The **condition is applied to select a set of elements of the original domain, this set is defined by the second argument: *selection domain unit***. This *selection domain unit* becomes the domain unit of the collected attributes.

The resulting [[attributes|attribute]] have the same values units and [[composition types|composition]] as the source attributes, [[expressions|expression]] are made with the [[lookup]] function for each new attribute. This works similar to the [[collect_attr_by_org_rel]] function, with as difference that the collect_attr_by_cond does not use an org_rel item.


## applies to

- *tree_item* can by any [[tree item]], but usually a [[unit]] or [[container]]
- *domain unit* a [[unit]] with [[value type]] of the group CanbeDomainUnit
- *condition* must be a boolean attribute or subexpression resulting in boolean values.

## since version

8.8.0

## example

<pre>
unit&lt;uint32&gt; City: StorageName = "city.csv", StorageType = "gdal.vect", StoragReadOnly = "True"
{
   attribute&lt;string&gt; name
   attribute&lt;uint32&gt; RegionCode;
}

unit&lt;uint32&gt; ZHCities := select_with_attr_by_cond(City, City/RegionCode == 200)

container attributes_ZHCities := <B>collect_attr_by_cond(<B>City, ZHCities, City/RegionCode == 200<B>)</B>;
</pre>

| City/RegionCode | City/Name |
|----------------:|-----------|
| 100             | Amsterdam |
| 200             | Rotterdam |
| 300             | Utrecht   |
| 200             | Den Haag  |
| 400             | Eindhoven |
| null            | Haarlem   |
| 400             | Tilburg   |

*domain City, nr of rows = 7*

|attributes_ZHCities/name|attributes_ZHCities/regionCode|
|------------------------|-----------------------------:|
|**Rotterdam**           |**200**                       |
|**Den Haag**            |**200**                       |

*domain <B>ZHCities</B>, nr of rows = 2*

<I> The subitems: name and regionCode are generated by the configured collect_attr_by_cond function.</I> 

## see also

- [[collect_attr_by_org_rel]]
- [[select_with_attr_by_cond]]
